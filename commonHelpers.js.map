{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector(\".gallery\");\nconst searchForm = document.querySelector(\".search-form\");\nconst loading = document.querySelector(\".loading\");\n\nloading.style.display = 'none';\n\nconst searchParamsDefaults = {\n    key: '41686068-f8a1ddec694d7ca7a5960473b',\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  \n  const lightbox = new SimpleLightbox('.gallery a', {\n    nav: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n  });\n\n  const searchImg = (params) => {\n    return fetch(`https://pixabay.com/api/?${params}`)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n        return response.json();\n      })\n      .then(({ hits }) => {\n        if (hits.length > 0) {\n          const renderImg = hits.reduce((html, hit) => {\n            return (\n              html +\n              `<li class=\"gallery-item\">\n          <a href=${hit.largeImageURL}> \n            <img class=\"gallery-img\" src =${hit.webformatURL} alt=${hit.tags}/>\n          </a>\n          <div class=\"gallery-text-box\">\n            <p>Likes: <span class=\"text-value\">${hit.likes}</span></p>\n            <p>views: <span class=\"text-value\">${hit.views}</span></p>\n            <p>comments: <span class=\"text-value\">${hit.comments}</span></p>\n            <p>downloads: <span class=\"text-value\">${hit.downloads}</span></p>\n        </div>\n        </li>`\n            );\n          }, '');\n  \n          gallery.innerHTML = renderImg;\n  \n          lightbox.refresh();\n        } else {\n          iziToast.error({\n            position: 'topRight',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        }\n      })\n      .catch(error => {\n        console.log(error.message);\n      })\n      .finally(() => {\n        loading.style.display = 'none';\n      });\n  }\n  \n  searchForm.addEventListener('submit', event => {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    searchParamsDefaults.q = event.target.elements.search.value.trim();\n    if (!searchParamsDefaults.q) {\n      iziToast.warning({\n        position: 'topRight',\n        message:\n          'Please, fill in the field!',\n      });\n      return;\n    }\n    loading.style.display = 'block';\n    const searchParams = new URLSearchParams(searchParamsDefaults);\n    searchImg(searchParams);\n    event.currentTarget.reset();\n  });"],"names":["gallery","searchForm","loading","searchParamsDefaults","lightbox","SimpleLightbox","searchImg","params","response","hits","renderImg","html","hit","iziToast","error","event","searchParams"],"mappings":"6vBAKA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAEjDA,EAAQ,MAAM,QAAU,OAExB,MAAMC,EAAuB,CACzB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEQC,EAAW,IAAIC,EAAe,aAAc,CAChD,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAG,EAEKC,EAAaC,GACV,MAAM,4BAA4BA,GAAQ,EAC9C,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,UAAU,EAErC,OAAOA,EAAS,MACxB,CAAO,EACA,KAAK,CAAC,CAAE,KAAAC,KAAW,CAClB,GAAIA,EAAK,OAAS,EAAG,CACnB,MAAMC,EAAYD,EAAK,OAAO,CAACE,EAAMC,IAEjCD,EACA;AAAA,oBACMC,EAAI;AAAA,4CACoBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA,iDAGvBA,EAAI;AAAA,iDACJA,EAAI;AAAA,oDACDA,EAAI;AAAA,qDACHA,EAAI;AAAA;AAAA,eAI5C,EAAE,EAELZ,EAAQ,UAAYU,EAEpBN,EAAS,QAAO,CAC1B,MACUS,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACd,CAAW,CAEX,CAAO,EACA,MAAMC,GAAS,CACd,QAAQ,IAAIA,EAAM,OAAO,CACjC,CAAO,EACA,QAAQ,IAAM,CACbZ,EAAQ,MAAM,QAAU,MAChC,CAAO,EAGLD,EAAW,iBAAiB,SAAUc,GAAS,CAI7C,GAHAA,EAAM,eAAc,EACpBf,EAAQ,UAAY,GACpBG,EAAqB,EAAIY,EAAM,OAAO,SAAS,OAAO,MAAM,OACxD,CAACZ,EAAqB,EAAG,CAC3BU,EAAS,QAAQ,CACf,SAAU,WACV,QACE,4BACV,CAAO,EACD,MACD,CACDX,EAAQ,MAAM,QAAU,QACxB,MAAMc,EAAe,IAAI,gBAAgBb,CAAoB,EAC7DG,EAAUU,CAAY,EACtBD,EAAM,cAAc,OACxB,CAAG"}